#include<stdio.h>
#include<stdlib.h>
/* program oblicza wyznacznik macierzy kwadratowej */

/* funkcja rekursywna obliczajaca wyznacznik */

float wyznacznik(int n, float macierz[n][n])
{
    int i, j, k, znak;
    float det[n][n], suma;
    suma = 0;
    znak = 1;
    if (n == 1)
	return macierz[0][0];
    else if (n > 1) {

/* przygotowywanie macierzy (det) z wycietym ostatnim wierszem i i-ta kolumna*/

	for (i = n - 1; i >= 0; i = i - 1) {
	    for (j = 0; j < n - 1; j = j + 1) {
		for (k = 0; k < i; k = k + 1) {
		    det[j][k] = macierz[j][k];
		}
		for (k = i; k < n - 1; k = k + 1) {
		    det[j][k] = macierz[j][k + 1];
		}
	    }

/* dodawanie do sumy kolejnych skladnikow (wyznacznikow macierzy det) */

	    suma = suma + znak * macierz[n - 1][i] * wyznacznik(n - 1, det);
	    znak = -znak;
	}
    }
    return suma;
}

int main()
{
    int n, x, y;

    printf("podaj wymair macierzy kwadratowej: ");
    scanf("%i", &n);
    printf("\n");

    float macierz[n][n];

/* wczytywanie macierzy */

    for (x = 0; x < n; x = x + 1) {
	for (y = 0; y < n; y = y + 1) {
	    printf("  podaj element macierz[%i,%i]=", x, y);
	    scanf("%f", &macierz[x][y]);
	}
	printf("\n");
    }

/* drukowanie wyznacznika macierzy */

    printf("%f", wyznacznik(n, macierz));
    printf("\n");
    return EXIT_SUCCESS;
}
